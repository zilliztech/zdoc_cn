"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[169],{6604:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>g,frontMatter:()=>r,metadata:()=>d,toc:()=>u});var a=l(7462),t=(l(7294),l(3905)),o=(l(3612),l(4866)),i=l(5162);const r={slug:"/docs/manage-index",beta:!1,notebook:"01_use_customized_schema.ipynb",sidebar_position:2},c="\u7ba1\u7406\u7d22\u5f15",d={unversionedId:"tutorials/collection/collection-and-index/manage-index",id:"tutorials/collection/collection-and-index/manage-index",title:"\u7ba1\u7406\u7d22\u5f15",description:"\u5728 Zilliz Cloud \u96c6\u7fa4\u4e2d\u4f7f\u7528\u7d22\u5f15\u505a\u4e3a\u5143\u6570\u636e\u7ed3\u6784\uff0c\u589e\u5f3a\u5411\u91cf\u76f8\u4f3c\u6027\u68c0\u7d22\u6027\u80fd\u3002\u5728 Zilliz Cloud \u96c6\u7fa4\u4e2d\u8fdb\u884c\u68c0\u7d22\u7684\u524d\u63d0\u662f\u60a8\u5df2\u7ecf\u4e3a\u5176\u4e2d\u7684 Collection \u521b\u5efa\u4e86\u7d22\u5f15\u3002",source:"@site/docs/tutorials/collection/collection-and-index/manage-index.md",sourceDirName:"tutorials/collection/collection-and-index",slug:"/docs/manage-index",permalink:"/docs/manage-index",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{slug:"/docs/manage-index",beta:!1,notebook:"01_use_customized_schema.ipynb",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u521b\u5efa Collection",permalink:"/docs/create-collection"},next:{title:"\u5220\u9664 Collection",permalink:"/docs/drop-collection"}},s={},u=[{value:"\u51c6\u5907\u5de5\u4f5c",id:"before-you-start",level:2},{value:"\u4e3a Collection \u521b\u5efa\u7d22\u5f15",id:"index-collection",level:2},{value:"\u52a0\u8f7d\u7d22\u5f15",id:"load-index",level:2},{value:"\u91ca\u653e\u7d22\u5f15",id:"release-index",level:2}],p={toc:u},m="wrapper";function g(e){let{components:n,...l}=e;return(0,t.kt)(m,(0,a.Z)({},p,l,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"\u7ba1\u7406\u7d22\u5f15"},"\u7ba1\u7406\u7d22\u5f15"),(0,t.kt)("p",null,"\u5728 Zilliz Cloud \u96c6\u7fa4\u4e2d\u4f7f\u7528\u7d22\u5f15\u505a\u4e3a\u5143\u6570\u636e\u7ed3\u6784\uff0c\u589e\u5f3a\u5411\u91cf\u76f8\u4f3c\u6027\u68c0\u7d22\u6027\u80fd\u3002\u5728 Zilliz Cloud \u96c6\u7fa4\u4e2d\u8fdb\u884c\u68c0\u7d22\u7684\u524d\u63d0\u662f\u60a8\u5df2\u7ecf\u4e3a\u5176\u4e2d\u7684 Collection \u521b\u5efa\u4e86\u7d22\u5f15\u3002"),(0,t.kt)("h2",{id:"before-you-start"},"\u51c6\u5907\u5de5\u4f5c"),(0,t.kt)("p",null,"\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a Collection\u3002\u5173\u4e8e\u5982\u4f55\u521b\u5efa Collection\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,t.kt)("a",{parentName:"p",href:"./create-collection"},"\u521b\u5efa Collection"),"\u3002"),(0,t.kt)("h2",{id:"index-collection"},"\u4e3a Collection \u521b\u5efa\u7d22\u5f15"),(0,t.kt)("p",null,"\u4e3a\u4e86\u5728 Zilliz Cloud \u4e0a\u5b9e\u73b0\u6700\u4f73\u7684 ANN \u68c0\u7d22\u6027\u80fd\uff0c\u521b\u5efa\u7d22\u5f15\u81f3\u5173\u91cd\u8981\u3002\u76ee\u524d\uff0cZilliz Cloud \u4ec5\u5141\u8bb8\u5728  Collection \u7684\u5411\u91cf\u5217\u4e0a\u521b\u5efa\u7d22\u5f15\u3002\u4e3a Collection \u521b\u5efa\u7d22\u5f15\u5176\u5b9e\u5c31\u610f\u5473\u7740\u4e3a\u5176\u5411\u91cf\u5217\u521b\u5efa\u7d22\u5f15\u5e76\u751f\u6210\u5bf9\u5e94\u7684\u7d22\u5f15\u6587\u4ef6\u3002"),(0,t.kt)("p",null,"Zilliz Cloud \u76ee\u524d\u652f\u6301\u521b\u5efa AUTOINDEX \u7c7b\u578b\u7684\u7d22\u5f15\u3002\u5982\u679c\u60a8\u5728\u521b\u5efa\u7d22\u5f15\u65f6\u6307\u5b9a\u4e86\u5176\u5b83\u7c7b\u578b\u7684\u7d22\u5f15\uff0cZilliz Cloud \u4f1a\u5c06\u5176\u91cd\u7f6e\u4e3a AUTOINDEX\u3002\u60a8\u53ef\u4ee5\u9605\u8bfb ",(0,t.kt)("a",{parentName:"p",href:"./autoindex-explained"},"AUTOINDEX")," \u6765\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u8be5\u7d22\u5f15\u7c7b\u578b\u7684\u4fe1\u606f\u3002"),(0,t.kt)(o.Z,{groupId:"code",defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,t.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},'# 4. Index collection\n# \'index_type\' defines the index algorithm to be used.\n#    AUTOINDEX is the only option.\n#\n# \'metric_type\' defines the way to measure the distance \n#    between vectors. Possible values are L2, IP, and Cosine,\n#    and defaults to Cosine.\nindex_params = {\n    "index_type": "AUTOINDEX",\n    "metric_type": "L2",\n    "params": {}\n}\n\n# To name the index, do as follows:\ncollection.create_index(\n    field_name="title_vector", \n    index_params=index_params,\n    index_name=\'title_vector_index\' # Optional\n)\n\n'))),(0,t.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-javascript"},'async function main() {\n\n    // (Continued)\n    \n    // 4. Create index\n    res = await client.createIndex({\n        collection_name: collectionName,\n        field_name: "title_vector",\n        index_type: "IVF_FLAT",\n        metric_type: "L2",\n        params: {\n            nlist: 1024\n        }\n    })\n\n    console.log(res)\n\n    // Output\n    // \n    // { error_code: \'Success\', reason: \'\', code: 0 }\n    // \n\n}\n'))),(0,t.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-java"},'public final class UseCustomizedSchemaDemo  {\n    public static void main(String[] args) {\n        \n        // (Continued)\n        \n        // 4. Create index\n\n        CreateIndexParam createIndexParam = CreateIndexParam.newBuilder()\n            .withCollectionName(collectionName)\n            .withFieldName("title_vector")\n            .withIndexName("title_vector_index")\n            .withIndexType(IndexType.AUTOINDEX)\n            .withMetricType(MetricType.L2)\n            .build();\n\n        R<RpcStatus> res = client.createIndex(createIndexParam);\n\n        if (res.getException() != null) {\n            System.err.println("Failed to create index: " + res.getException().getMessage());\n            return;\n        }\n\n        System.out.println("Index created!");\n\n        // Output:\n        // Index created! \n    }\n}\n'))),(0,t.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-go"},'func main() {\n        // (Continued)\n    \n        // 3. Create index for cluster\n        index, err := entity.NewIndexAUTOINDEX(entity.MetricType("L2"))\n\n        if err != nil {\n                log.Fatal("Failed to prepare the index:", err.Error())\n        }\n\n        fmt.Println(index.Name())\n\n        err = conn.CreateIndex(context.Background(), COLLNAME, "title_vector", index, false)\n\n        if err != nil {\n                log.Fatal("Failed to create the index:", err.Error())\n        }          \n}\n')))),(0,t.kt)("h2",{id:"load-index"},"\u52a0\u8f7d\u7d22\u5f15"),(0,t.kt)("p",null,"\u5728 Collection \u4e2d\u8fdb\u884c\u4efb\u4f55\u68c0\u7d22\u548c\u67e5\u8be2\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5c06\u521b\u5efa\u597d\u7684\u7d22\u5f15\u6587\u4ef6\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002"),(0,t.kt)(o.Z,{groupId:"code",defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,t.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},'# 5. Load collection\ncollection.load()\n\n# Get loading progress\nprogress = utility.loading_progress(COLLECTION_NAME)\n\nprint(progress)\n\n# Output\n#\n# {\n#     "loading_progress": "100%"\n# }\n'))),(0,t.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-javascript"},"async function main() {\n\n    // (Continued)\n    \n    res = await client.loadCollection({\n        collection_name: collectionName\n    })\n\n    console.log(res)\n\n    // Output\n    // \n    // { error_code: 'Success', reason: '', code: 0 }\n    // \n\n}\n"))),(0,t.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-java"},'public final class UseCustomizedSchemaDemo  {\n    public static void main(String[] args) {\n        \n        // (Continued)\n        \n        // 5. Load collection\n\n        LoadCollectionParam loadCollectionParam = LoadCollectionParam.newBuilder()\n            .withCollectionName(collectionName)\n            .build();\n\n        R<RpcStatus> loadCollectionRes = client.loadCollection(loadCollectionParam);\n\n        if (loadCollectionRes.getException() != null) {\n            System.err.println("Failed to load collection: " + loadCollectionRes.getException().getMessage());\n            return;\n        }\n\n        System.out.println("Collection loaded!");\n\n        // Output:\n        // Collection loaded!\n    }\n}\n'))),(0,t.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-go"},'func main() {\n        // (Continued)\n    \n        // 4. Load collection\n        loadCollErr := conn.LoadCollection(context.Background(), COLLNAME, false)\n\n        if loadCollErr != nil {\n                log.Fatal("Failed to load collection:", loadCollErr.Error())\n        }\n\n        // 5. Get load progress\n        progress, err := conn.GetLoadingProgress(context.Background(), COLLNAME, nil)\n\n        if err != nil {\n                log.Fatal("Failed to get loading progress:", err.Error())\n        }\n\n        fmt.Println("Loading progress:", progress)        \n}\n')))),(0,t.kt)("h2",{id:"release-index"},"\u91ca\u653e\u7d22\u5f15"),(0,t.kt)("p",null,"\u5bf9\u4e8e\u6682\u65f6\u65e0\u987b\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c\u7684 Collection \u6765\u8bf4\uff0c\u53ef\u4ee5\u5c06\u52a0\u8f7d\u5230\u5185\u5b58\u7684\u7d22\u5f15\u6587\u4ef6\u4ece\u5185\u5b58\u4e2d\u91ca\u653e\u51fa\u6765\u3002"),(0,t.kt)(o.Z,{groupId:"code",defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,t.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},"collection.release()\n"))),(0,t.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-javascript"},"async function main() {\n\n    // (Continued)\n    \n    res = await client.releaseCollection({\n        collection_name: collectionName\n    })\n\n    // Output\n    // \n    // { error_code: 'Success', reason: '', code: 0 }\n    // \n\n}\n"))),(0,t.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-java"},'public final class UseCustomizedSchemaDemo  {\n    public static void main(String[] args) {\n        \n        // (Continued)\n\n        ReleaseCollectionParam releaseCollectionParam = ReleaseCollectionParam.newBuilder()\n            .withCollectionName(collectionName)\n            .build();\n\n        R<RpcStatus> releaseCollectionRes = client.releaseCollection(releaseCollectionParam);\n\n        if (releaseCollectionRes.getException() != null) {\n            System.err.println("Failed to release collection: " + releaseCollectionRes.getException().getMessage());\n            return;\n        }\n    }\n}\n'))),(0,t.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-go"},'func main() {\n    // (Continued)\n    \n    releaseColErr := conn.ReleaseCollection(context.Background(), COLLNAME)\n\n    if releaseColErr != nil {\n        log.Fatal("Failed to release collection:", releaseColErr.Error())\n    }       \n}\n')))))}g.isMDXComponent=!0}}]);