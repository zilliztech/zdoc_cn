---
slug: /choose-the-right-CU-type
sidebar_position: 1
---

# 选择合适的 CU 类型

计算单元（Compute Unit，CU）是部署集群的物理资源单元。不同的 CU 类型包含不同的 CPU、内存和存储资源组合。创建集群时，选择合适类型的 CU 至关重要。Zilliz Cloud 提供以下类型的 CU 以满足不同的业务需求：**性能型 CU**、**容量型 CU** 和**经济型 CU**。

## 性能型 CU {#performance-type-cu}

性能型 CU 专为时延和吞吐敏感的工作负载设计，适合需要低时延和高吞吐量的相似性搜索场景。该类型 CU 主要用于需要实时响应的应用程序，如：

- 生成式 AI

- 推荐系统

- 搜索引擎

- 聊天机器人

- 内容审核

- 知识库

- 反欺诈应用

## 容量型 CU {#capacitive-cu}

如果您的应用程序涉及大量数据集，则可以考虑容量型 CU。这种类型的 CU 比性能型 CU 容纳多 5 倍的数据，但因此也会牺牲一定的搜索性能。容量型 CU 适用于以下场景（包括但不限于）：

- 大规模非结构化数据搜索（文本、图像、视频、分子结构等）

- 版权检测

- 身份验证

## 经济型 CU {#economical-cu}

如果预算有限且应用程序对响应时间要求不高，您可以考虑经济型 CU。经济型 CU 可以容纳和容量型 CU 相同体量的数据，但搜索时延也会相对较高。这种类型的 CU 适用于离线任务场景，如：

- 数据标注

- 数据去重

- 数据聚类

- 数据集离群点或类别平衡检测

## 快速比较 {#quick-comparison}

下表是三种 CU 类型的快速比较。

| CU 类型  | 时延 | 吞吐量 | 容量 | 成本         |
| ------ | -- | --- | -- | ---------- |
| 性能型 CU | 低  | 高   | 低  | ¥1.25 / 小时 |
| 容量型 CU | 中  | 中   | 高  | ¥1.25 / 小时 |
| 经济型 CU | 高  | 低   | 高  | ¥0.85 / 小时 |

## 性能比较 {#performance-comparison}

用户通常会密切关注关键性能指标，如搜索时延和吞吐量。为此，我们基于两个数据集进行了性能测试，其中一个数据集包含了 100 万个 768 维向量，另一个数据集包含了 500 万个 768 维向量。我们在不同的 Top K 值下（10、100、250、1000）验证了各类型 CU 的性能。

| Top K                  |        |           | 10       | 100      | 250      | 1000       |
| ---------------------- | ------ | --------- | -------- | -------- | -------- | ---------- |
| <br/><br/>时延<br/><br/> | 性能型 CU | 1M 768dim | < 10 ms  | < 10 ms  | < 10 ms  | 10-20 ms   |
|                        | 容量型 CU | 5M 768dim | < 50 ms  | < 50 ms  | < 50 ms  | 50-100 ms  |
|                        | 经济型 CU | 5M 768dim | < 100 ms | < 100 ms | < 100 ms | 100-200 ms |

测试结果显示，性能型 CU 在性能方面明显优于其他两种 CU 类型。在常见的 Top K 取值范围内（10-250），性能型 CU 的响应时延维持在 10 毫秒以下，比容量型 CU 快 5 到 10 倍，同时也远快于经济型 CU。当 Top K 值为 1000 时，各类型 CU 的性能差异愈发明显。性能型 CU 的时延在 10-20 毫秒左右，容量型 CU 在 50-100 毫秒之间波动，而经济型 CU 在 100-200 毫秒。值得注意的是，即使性能型 CU 相对时延较高，它提供的搜索时延仍能适用于大多数实时应用场景。

| Top K                   |        |           | 10  | 100 | 250 | 1000 |
| ----------------------- | ------ | --------- | --- | --- | --- | ---- |
| <br/><br/>QPS<br/><br/> | 性能型 CU | 1M 768dim | 520 | 440 | 270 | 150  |
|                         | 容量型 CU | 5M 768dim | 100 | 80  | 60  | 40   |
|                         | 经济型 CU | 5M 768dim | 30  | 25  | 20  | 10   |

从吞吐方面来看，性能型 CU 的吞吐量是容量型 CU 的 4 到 5 倍，同时也是经济型 CU 的 15 到 18 倍。

## 存储容量比较 {#storage-capacity-comparison}

在存储容量方面，我们使用标准向量维度（128、256、512、768 和 1024）对三种不同类型的 CU 进行了综合评估。以下是我们的一些重要发现：

- 容量型 CU 和经济型 CU 的存储容量相同；

- 容量型 CU 和经济型 CU 比性能型 CU多容纳 5 倍的数据；

- 同一类型的 CU 可容纳的 1024 维向量数是 512 维向量数的 2 倍。

| 向量维度 | 向量数（百万）/ CU |        |        |
| ---- | ----------- | ------ | ------ |
|      | 性能型 CU      | 容量型 CU | 经济型 CU |
| 128  | 5           | 25     | 25     |
| 256  | 2.96        | 14.87  | 14.87  |
| 512  | 1.63        | 8.22   | 8.22   |
| 768  | 1.2         | 5.6    | 5.6    |
| 1024 | 0.86        | 4.34   | 4.34   |

注意，我们在测试中只考虑了主键和向量字段，没有引入标量字段。在真实应用场景中，如果存在其他标量字段（如 `id`、`label`、`keywords`、`summary`、`url` 等），实际存储容量可能会与上表的测试结果有差异。

## 选型示例 {#selection-example}

假设现有一个图像推荐应用，目前有 1000 万张图像库存，且每个图像对应一个 768 维的向量。该应用需要能够支持每秒 1000 次的推荐请求，检索前 100 个推荐结果的端到端时延不能超过 30 毫秒。

从时延指标来看，只有性能型 CU 能够满足要求；

从容量指标来看，单个性能型 CU 可以容纳 120 万个 768 维向量。因此，要处理 1000 万个 768 维向量，需要至少 9 个 CU；

从吞吐量来看，当 Top K 设置为 100 时，性能型 CU 的峰值 QPS 达到 440。因此，要支持 1000 QPS，需要 3 个 CU。

因此，在该场景下，推荐选择性能型 CU，并且 CU 的数量至少为 9。