"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[1061],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>g});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=c(t),m=l,g=u["".concat(s,".").concat(m)]||u[m]||p[m]||r;return t?a.createElement(g,i(i({ref:n},d),{},{components:t})):a.createElement(g,i({ref:n},d))}));function g(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[u]="string"==typeof e?e:l,i[1]=o;for(var c=2;c<r;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(7294),l=t(6010);const r={tabItem:"tabItem_Ymn6"};function i(e){let{children:n,hidden:t,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,l.Z)(r.tabItem,i),hidden:t},n)}},4866:(e,n,t)=>{t.d(n,{Z:()=>k});var a=t(7462),l=t(7294),r=t(6010),i=t(2466),o=t(6550),s=t(1980),c=t(7392),d=t(12);function u(e){return function(e){return l.Children.map(e,(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:l}}=e;return{value:n,label:t,attributes:a,default:l}}))}function p(e){const{values:n,children:t}=e;return(0,l.useMemo)((()=>{const e=n??u(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const a=(0,o.k6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s._X)(r),(0,l.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function h(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=p(e),[i,o]=(0,l.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[s,c]=g({queryString:t,groupId:a}),[u,h]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,d.Nk)(t);return[a,(0,l.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),y=(()=>{const e=s??u;return m({value:e,tabValues:r})?e:null})();(0,l.useLayoutEffect)((()=>{y&&o(y)}),[y]);return{selectedValue:i,selectValue:(0,l.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),c(e),h(e)}),[c,h,r]),tabValues:r}}var y=t(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:n,block:t,selectedValue:o,selectValue:s,tabValues:c}=e;const d=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.o5)(),p=e=>{const n=e.currentTarget,t=d.indexOf(n),a=c[t].value;a!==o&&(u(n),s(a))},m=e=>{let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;n=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;n=d[t]??d[d.length-1];break}}n?.focus()};return l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n)},c.map((e=>{let{value:n,label:t,attributes:i}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,key:n,ref:e=>d.push(e),onKeyDown:m,onClick:p},i,{className:(0,r.Z)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":o===n})}),t??n)})))}function w(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return l.createElement("div",{className:"margin-top--md"},r.map(((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function b(e){const n=h(e);return l.createElement("div",{className:(0,r.Z)("tabs-container",v.tabList)},l.createElement(f,(0,a.Z)({},e,n)),l.createElement(w,(0,a.Z)({},e,n)))}function k(e){const n=(0,y.Z)();return l.createElement(b,(0,a.Z)({key:String(n)},e))}},5991:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>g,frontMatter:()=>o,metadata:()=>c,toc:()=>u});var a=t(7462),l=(t(7294),t(3905)),r=t(4866),i=t(5162);const o={slug:"/use-customized-schema",sidebar_position:0},s="\u5b9a\u5236 Schema",c={unversionedId:"tutorials/advanced-user-guides/customize-collection-schema/use-customized-schema",id:"tutorials/advanced-user-guides/customize-collection-schema/use-customized-schema",title:"\u5b9a\u5236 Schema",description:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4e3a Collection \u5b9a\u5236 Schema\u3002",source:"@site/docs/tutorials/advanced-user-guides/customize-collection-schema/use-customized-schema.md",sourceDirName:"tutorials/advanced-user-guides/customize-collection-schema",slug:"/use-customized-schema",permalink:"/docs/use-customized-schema",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{slug:"/use-customized-schema",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528 Schema",permalink:"/docs/customize-collection-schema"},next:{title:"\u5f00\u542f\u52a8\u6001 Schema",permalink:"/docs/enable-dynamic-schema"}},d={},u=[{value:"\u5f00\u59cb\u524d",id:"before-you-start",level:2},{value:"\u8fde\u63a5\u96c6\u7fa4",id:"connect-to-cluster",level:2},{value:"\u521b\u5efa Collection",id:"create-collection",level:2},{value:"\u4e3a Collection \u521b\u5efa\u7d22\u5f15",id:"create-an-index-for-the-collection",level:2},{value:"\u52a0\u8f7d\u548c\u91ca\u653e Collection",id:"load-and-release-collection",level:2},{value:"\u63d2\u5165 Entity",id:"insert-entity",level:2},{value:"\u51c6\u5907\u6570\u636e",id:"prepare-data",level:3},{value:"\u63d2\u5165\u6570\u636e",id:"insert-data",level:3},{value:"\u641c\u7d22\u548c\u67e5\u8be2",id:"search-and-query",level:2},{value:"\u76f8\u5173\u6587\u6863",id:"related-documents",level:2}],p={toc:u},m="wrapper";function g(e){let{components:n,...t}=e;return(0,l.kt)(m,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u5b9a\u5236-schema"},"\u5b9a\u5236 Schema"),(0,l.kt)("p",null,"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4e3a Collection \u5b9a\u5236 Schema\u3002"),(0,l.kt)("h2",{id:"before-you-start"},"\u5f00\u59cb\u524d"),(0,l.kt)("p",null,"\u8bf7\u786e\u4fdd\u5df2\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9aa4\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5df2\u4e86\u89e3 Schema \u76f8\u5173\u4fe1\u606f\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1",(0,l.kt)("a",{parentName:"p",href:"./data-models-explained"},"\u6570\u636e\u6a21\u578b"),"\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5df2\u521b\u5efa\u96c6\u7fa4\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1",(0,l.kt)("a",{parentName:"p",href:"./create-cluster"},"\u521b\u5efa\u96c6\u7fa4"),"\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5df2\u4e0b\u8f7d\u793a\u4f8b\u6570\u636e\u96c6\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1",(0,l.kt)("a",{parentName:"p",href:"./example-dataset-1"},"\u793a\u4f8b\u6570\u636e\u96c6"),"\u3002"))),(0,l.kt)("h2",{id:"connect-to-cluster"},"\u8fde\u63a5\u96c6\u7fa4"),(0,l.kt)("p",null,"\u521b\u5efa\u96c6\u7fa4\u65f6\uff0c\u60a8\u9700\u8981\u914d\u7f6e\u4e00\u4e2a\u7531\u7528\u6237\u540d\u548c\u5bc6\u7801\u7ec4\u6210\u7684\u96c6\u7fa4\u51ed\u8bc1\u3002\u8bf7\u52a1\u5fc5\u8bb0\u4e0b\u8fd9\u4e9b\u4fe1\u606f\uff0c\u56e0\u4e3a\u60a8\u9700\u8981\u5b83\u4eec\u6765\u8fde\u63a5\u96c6\u7fa4\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import json\nfrom pymilvus import connections, FieldSchema, CollectionSchema, DataType, Collection, utility\n\n# \u8fde\u63a5\u96c6\u7fa4\nconnections.connect(\n  alias='default', \n  #  \u4ece\u63a7\u5236\u53f0\u83b7\u53d6\u7684\u96c6\u7fa4\u516c\u7f51\u5730\u5740\n  uri='https://<CLUSTER-ID>.<CLOUD-REGION>.vectordb.zillizcloud.com:<ACCESS-PORT>',\n  secure=True,\n  token='user:password', # \u521b\u5efa\u96c6\u7fa4\u65f6\u6307\u5b9a\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n        # \u4e5f\u53ef\u4ee5\u4f7f\u7528\u65e7\u8fde\u63a5\u65b9\u5f0f `user` \u548c `password` \u6765\u66ff\u4ee3 `token`\uff1a\n        # user='',\n        # password='' \n)\n"))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const address = "https://<CLUSTER-ID>.<CLOUD-REGION>.vectordb.zillizcloud.com:<ACCESS-PORT>"\nconst token = "user:password"\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\nconst client = new MilvusClient({\n    address,\n    token\n}, true);\n'))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'import io.milvus.client.*;\nimport io.milvus.param.*;\nimport io.milvus.param.collection.FieldType;\nimport io.milvus.param.collection.FlushParam;\nimport io.milvus.param.index.CreateIndexParam;\nimport io.milvus.param.collection.CreateCollectionParam;\nimport io.milvus.param.collection.DropCollectionParam;\nimport io.milvus.grpc.DataType;\nimport io.milvus.grpc.FlushResponse;\nimport io.milvus.param.dml.InsertParam;\nimport io.milvus.param.dml.InsertParam.Field;\nimport io.milvus.grpc.MutationResult;\nimport io.milvus.response.MutationResultWrapper;\nimport io.milvus.param.dml.SearchParam;\nimport io.milvus.grpc.SearchResults;\nimport io.milvus.response.SearchResultsWrapper;\nimport io.milvus.common.clientenum.ConsistencyLevelEnum;\nimport io.milvus.param.collection.LoadCollectionParam;\nimport io.milvus.grpc.GetLoadingProgressResponse;\nimport io.milvus.param.collection.GetLoadingProgressParam;\n\nimport com.alibaba.fastjson.JSON;\nimport com.alibaba.fastjson.JSONArray;\nimport com.alibaba.fastjson.JSONObject;\n\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\n\n// 1. \u8fde\u63a5\u96c6\u7fa4\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nConnectParam connectParam = ConnectParam.newBuilder()\n    .withUri("https://<CLUSTER-ID>.<CLOUD-REGION>.vectordb.zillizcloud.com:<ACCESS-PORT>")\n    .withToken("db_admin:<password>")\n    .build();\n\nMilvusServiceClient client = new MilvusServiceClient(connectParam);\n\nSystem.out.println("Connected to Zilliz Cloud!");\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'import (\n        "context"\n        "encoding/json"\n        "fmt"\n        "log"\n        "os"\n\n        "github.com/milvus-io/milvus-sdk-go/v2/client"\n        "github.com/milvus-io/milvus-sdk-go/v2/entity"\n)\n\n// 1. \u8fde\u63a5\u96c6\u7fa4\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nconnParams := client.Config{\n        Address: "https://<CLUSTER-ID>.<CLOUD-REGION>.vectordb.zillizcloud.com:<ACCESS-PORT>",\n        APIKey:  "db_admin:<password>",\n        // Username:      "db_admin",\n        // Password:      "<password>",\n        EnableTLSAuth: true,\n}\n\nconn, err := client.NewClient(context.Background(), connParams)\n\nif err != nil {\n        log.Fatal("Failed to connect to Zilliz Cloud:", err.Error())\n}\n')))),(0,l.kt)("h2",{id:"create-collection"},"\u521b\u5efa Collection"),(0,l.kt)("p",null,"\u52a8\u6001 Schema \u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u66f4\u7b80\u5355\u9ad8\u6548\u5730\u63d2\u5165\u6570\u636e\uff0c\u540c\u65f6\u4e5f\u964d\u4f4e\u4e86\u7528\u6237\u5b66\u4e60\u96be\u5ea6\u3002\u5982\u679c\u662f\u751f\u4ea7\u73af\u5883\uff0c\u63a8\u8350\u4f7f\u7528\u81ea\u5b9a\u4e49 Schema \u800c\u975e\u52a8\u6001 Schema\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u6570\u636e\u90fd\u80fd\u6309\u9884\u671f\u5b58\u50a8\u3002"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728 Collection \u4e2d\u6307\u5b9a\u5404\u5b57\u6bb5\u7684\u540d\u79f0\u548c\u6570\u636e\u7c7b\u578b\u6765\u5b9a\u5236 Schema\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 2. \u5b9a\u4e49\u5b57\u6bb5\nfields = [\n    FieldSchema(name="id", dtype=DataType.INT64, is_primary=True),\n    FieldSchema(name="title", dtype=DataType.VARCHAR, max_length=512),   \n    FieldSchema(name="title_vector", dtype=DataType.FLOAT_VECTOR, dim=768),\n    FieldSchema(name="link", dtype=DataType.VARCHAR, max_length=512),\n    FieldSchema(name="reading_time", dtype=DataType.INT64),\n    FieldSchema(name="publication", dtype=DataType.VARCHAR, max_length=512),\n    FieldSchema(name="claps", dtype=DataType.INT64),\n    FieldSchema(name="responses", dtype=DataType.INT64)\n]\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// 2. \u5b9a\u4e49\u5b57\u6bb5\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nconst fields = [\n    {\n        name: "id",\n        data_type: DataType.Int64,\n        is_primary_key: true\n    },\n    {\n        name: "title",\n        data_type: DataType.VarChar,\n        max_length: 512,\n    },\n    {\n        name: "title_vector",\n        data_type: DataType.FloatVector,\n        dim: 768,\n    },\n    {\n        name: "link",\n        data_type: DataType.VarChar,\n        max_length: 512,\n    },\n    {\n        name: "reading_time",\n        data_type: DataType.Int64,\n    },\n    {\n        name: "publication",\n        data_type: DataType.VarChar,\n        max_length: 512,\n    },\n    {\n        name: "claps",\n        data_type: DataType.Int64,\n    },\n    {\n        name: "responses",\n        data_type: DataType.Int64,\n    },\n];\n'))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 2. \u5b9a\u4e49\u5b57\u6bb5\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nFieldType id = FieldType.newBuilder()\n    .withName("id")\n    .withDataType(DataType.Int64)\n    .withPrimaryKey(true)\n    .withAutoID(true)\n    .build();\n\nFieldType title = FieldType.newBuilder()\n    .withName("title")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    .build();\n\nFieldType title_vector = FieldType.newBuilder()\n    .withName("title_vector")\n    .withDataType(DataType.FloatVector)\n    .withDimension(768)\n    .build();\n\nFieldType link = FieldType.newBuilder()\n    .withName("link")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    .build();\n\nFieldType reading_time = FieldType.newBuilder()\n    .withName("reading_time")\n    .withDataType(DataType.Int64)\n    .build();\n\nFieldType publication = FieldType.newBuilder()\n    .withName("publication")\n    .withDataType(DataType.VarChar)\n    .withMaxLength(512)\n    .build();\n\nFieldType claps = FieldType.newBuilder()\n    .withName("claps")\n    .withDataType(DataType.Int64)\n    .build();\n\nFieldType responses = FieldType.newBuilder()\n    .withName("responses")\n    .withDataType(DataType.Int64)\n    .build();\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 2. \u5b9a\u4e49\u5b57\u6bb5\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nid := entity.NewField().\n        WithName("id").\n        WithDataType(entity.FieldTypeInt64).\n        WithIsPrimaryKey(true)\n\ntitle := entity.NewField().\n        WithName("title").\n        WithDataType(entity.FieldTypeVarChar).\n        WithMaxLength(512)\n\ntitle_vector := entity.NewField().\n        WithName("title_vector").\n        WithDataType(entity.FieldTypeFloatVector).\n        WithDim(768)\n\nlink := entity.NewField().\n        WithName("link").\n        WithDataType(entity.FieldTypeVarChar).\n        WithMaxLength(512)\n\nreading_time := entity.NewField().\n        WithName("reading_time").\n        WithDataType(entity.FieldTypeInt64)\n\npublication := entity.NewField().\n        WithName("publication").\n        WithDataType(entity.FieldTypeVarChar).\n        WithMaxLength(512)\n\nclaps := entity.NewField().\n        WithName("claps").\n        WithDataType(entity.FieldTypeInt64)\n\nresponses := entity.NewField().\n        WithName("responses").\n        WithDataType(entity.FieldTypeInt64)\n')))),(0,l.kt)("p",null,"\u5b9a\u4e49\u5b57\u6bb5\u540e\uff0c\u4e3a Collection \u521b\u5efa Schema\uff1a"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 3. \u521b\u5efa Schema\nschema = CollectionSchema(\n    fields,\n    description="Schema of Medium articles",\n    enable_dynamic_field=False\n)\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// 3. \u6784\u5efa Collection \u521b\u5efa\u8bf7\u6c42\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nconst collection_name = "medium_articles";\n\nconst req = {\n    collection_name,\n    fields\n}\n'))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 3. \u521b\u5efa Schema\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nCreateCollectionParam createCollectionParam = CreateCollectionParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .withDescription("Schema of Medium articles")\n    .addFieldType(id)\n    .addFieldType(title)\n    .addFieldType(title_vector)\n    .addFieldType(link)\n    .addFieldType(reading_time)\n    .addFieldType(publication)\n    .addFieldType(claps)\n    .addFieldType(responses)\n    .withEnableDynamicField(true)\n    .build();\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 3. \u521b\u5efa Schema\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nschema := &entity.Schema{\n        CollectionName: "medium_articles",\n        Description:    "Medium articles published between Jan and August in 2020 in prominent publications",\n        AutoID:         true,\n        Fields: []*entity.Field{\n                id,\n                title,\n                title_vector,\n                link,\n                reading_time,\n                publication,\n                claps,\n                responses,\n        },\n}\n')))),(0,l.kt)("p",null,"\u4f7f\u7528\u524d\u9762\u5b9a\u4e49\u7684 Schema \u521b\u5efa Collection\uff1a"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 4. \u521b\u5efa Collection\ncollection = Collection(\n    name="medium_articles", \n    description="Medium articles published between Jan and August in 2020 in prominent publications",\n    schema=schema\n)\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// 4. \u521b\u5efa Collection\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nlet res = await client.createCollection(req);\n\nconsole.log(res)\n\n// \u8f93\u51fa\uff1a\n// { error_code: 'Success', reason: '' }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 4. \u521b\u5efa Collection\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nR<RpcStatus> collection = client.createCollection(createCollectionParam);\n\nif (collection.getException() != null) {\n    System.out.println("Failed to create collection: " + collection.getException().getMessage());\n    return;\n}\n\nSystem.out.println("Collection created!");\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 4. \u521b\u5efa Collection\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\ncolerr := conn.CreateCollection(context.Background(), schema, 2)\n\nif colerr != nil {\n        log.Fatal("Failed to create collection:", colerr.Error())\n}\n')))),(0,l.kt)("h2",{id:"create-an-index-for-the-collection"},"\u4e3a Collection \u521b\u5efa\u7d22\u5f15"),(0,l.kt)("p",null,"\u5b9e\u73b0\u6781\u81f4\u6027\u80fd\u7684\u8fd1\u4f3c\u6700\u8fd1\u90bb\uff08Approximate Nearest Neighbor\uff0cANN\uff09\u641c\u7d22\u9700\u8981\u4f7f\u7528\u7d22\u5f15\u3002Zilliz Cloud \u96c6\u7fa4\u652f\u6301\u5bf9\u5411\u91cf\u5b57\u6bb5\u8fdb\u884c\u7d22\u5f15\uff0c\u4e3a Collection \u521b\u5efa\u7d22\u5f15\u5b9e\u9645\u662f\u5bf9 Collection \u4e2d\u7684\u5411\u91cf\u5b57\u6bb5\u8fdb\u884c\u7d22\u5f15\u3002"),(0,l.kt)("p",null,"Zilliz Cloud \u76ee\u524d\u4ec5\u652f\u6301 ",(0,l.kt)("strong",{parentName:"p"},"AUTOINDEX")," \u7d22\u5f15\u7c7b\u578b\u3002\u5982\u679c\u6307\u5b9a\u7684\u7d22\u5f15\u7c7b\u578b\u4e0d\u662f ",(0,l.kt)("strong",{parentName:"p"},"AUTOINDEX"),"\uff0c",(0,l.kt)("strong",{parentName:"p"},"AUTOINDEX "),"\u4e5f\u4f1a\u81ea\u52a8\u751f\u6548\u3002\u8be6\u60c5\u8bf7\u53c2\u89c1 ",(0,l.kt)("a",{parentName:"p",href:"./autoindex-explained"},"AUTOINDEX"),"\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 5. \u521b\u5efa\u7d22\u5f15\n\nindex_params = {\n    "index_type": "AUTOINDEX",\n    "metric_type": "L2",\n    "params": {}\n}\n\n# \u521b\u5efa\u7279\u5b9a\u540d\u79f0\u7684\u7d22\u5f15\uff1a\ncollection.create_index(\n  field_name="title_vector", \n  index_params=index_params,\n  index_name=\'title_vector_index\'\n)\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// 5. \u521b\u5efa\u7d22\u5f15\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nindex_param = {\n    index_type: "AUTOINDEX",\n    metric_type: "L2",\n    params: {}\n}\n\nres = await client.createIndex({\n    collection_name,\n    field_name: "title_vector",\n    index_param\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// { error_code: \'Success\', reason: \'\' }\n'))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 5. \u521b\u5efa\u7d22\u5f15\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nCreateIndexParam createIndexParam = CreateIndexParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .withFieldName("title_vector")\n    .withIndexName("title_vector_index")\n    .withIndexType(IndexType.AUTOINDEX)\n    .withMetricType(MetricType.L2)\n    .build();\n\nR<RpcStatus> res = client.createIndex(createIndexParam);\n\nif (res.getException() != null) {\n    System.out.println("Failed to create index: " + res.getException().getMessage());\n    return;\n}\n\nSystem.out.println("Index created!");\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 5. \u521b\u5efa\u7d22\u5f15\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nindex, err := entity.NewIndexAUTOINDEX(entity.MetricType("L2"))\n\nif err != nil {\n        log.Fatal("Failed to prepare the index:", err.Error())\n}\n\nprintln(index.Name())\n\nerr = conn.CreateIndex(context.Background(), "medium_articles", "title_vector", index, false)\n\nif err != nil {\n        log.Fatal("Failed to create the index:", err.Error())\n}\n')))),(0,l.kt)("h2",{id:"load-and-release-collection"},"\u52a0\u8f7d\u548c\u91ca\u653e Collection"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u4f7f\u7528 SDK \u521b\u5efa\u7684 Collection\uff0c\u5e94\u5728\u6267\u884c\u641c\u7d22\u548c\u67e5\u8be2\u4e4b\u524d\u624b\u52a8\u52a0\u8f7d\u3002\u5982\u679c\u6682\u65f6\u4e0d\u9700\u8981\u4f7f\u7528 Collection\uff0c\u4e5f\u53ef\u4ee5\u624b\u52a8\u91ca\u653e\u4ee5\u8282\u7701\u5f00\u9500\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 6. \u52a0\u8f7d Collection\ncollection.load()\n\n# \u67e5\u770b\u52a0\u8f7d\u8fdb\u7a0b\nprogress = utility.loading_progress("medium_articles")\n\nprint(f"Collection loaded successfully: {progress}")\n\n# \u8f93\u51fa\uff1a\n# Collection loaded successfully: 100%\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// 6. \u52a0\u8f7d Collection\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nres = await client.loadCollection({\n    collection_name\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// { error_code: 'Success', reason: '' }\n\nres = await client.getLoadingProgress({\n    collection_name\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// { status: { error_code: 'Success', reason: '' }, progress: '0' }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 6. \u52a0\u8f7d Collection\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nLoadCollectionParam loadCollectionParam = LoadCollectionParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .build();\n\nR<RpcStatus> loadCollectionRes = client.loadCollection(loadCollectionParam);\n\n// Get loading progress\nGetLoadingProgressParam getLoadingProgressParam = GetLoadingProgressParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .build();\n\nR<GetLoadingProgressResponse> getLoadingProgressRes = client.getLoadingProgress(getLoadingProgressParam);\n\nSystem.out.println("Loading progress: " + getLoadingProgressRes.getData().getProgress());\n\n// \u8f93\u51fa\uff1a\n// Loading progress: 100\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 6. \u52a0\u8f7d Collection\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nloadCollErr := conn.LoadCollection(context.Background(), "medium_articles", false)\n\nif loadCollErr != nil {\n        log.Fatal("Failed to load collection:", loadCollErr.Error())\n}\n\n// Load progress\nprogress, err := conn.GetLoadingProgress(context.Background(), "medium_articles", nil)\n\nif err != nil {\n        log.Fatal("Failed to get loading progress:", err.Error())\n}\n\nprintln("Loading progress:", progress)\n')))),(0,l.kt)("p",null,"\u8981\u91ca\u653e Collection\uff0c\u8bf7\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"collection.release()\n"))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nres = await client.releaseCollection({\n    collection_name\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// { error_code: 'Success', reason: '' }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'ReleaseCollectionParam releaseCollectionParam = ReleaseCollectionParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .build();\n\nR<RpcStatus> releaseCollectionRes = client.releaseCollection(releaseCollectionParam);\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'releaseCollErr := conn.ReleaseCollection(context.Background(), "medium_articles")\n\nif releaseCollErr != nil {\n        log.Fatal("Failed to release collection:", releaseCollErr.Error())\n}\n')))),(0,l.kt)("h2",{id:"insert-entity"},"\u63d2\u5165 Entity"),(0,l.kt)("p",null,"\u5411 Collection \u4e2d\u63d2\u5165 Entity \u524d\uff0c\u8bf7\u786e\u4fdd Entity \u7684\u683c\u5f0f\u4e0e Collection \u7684 Schema \u4e00\u81f4\u3002"),(0,l.kt)("h3",{id:"prepare-data"},"\u51c6\u5907\u6570\u636e"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u6309\u884c\u6216\u5217\u6765\u51c6\u5907\u6570\u636e\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6309\u884c\u6392\u5217\u6570\u636e\n\u8981\u5c06\u6570\u636e\u6392\u5217\u4e3a\u884c\uff0c\u9700\u8981\u5c06\u6bcf\u884c\u6392\u5217\u4e3a\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u4e2d\u5b57\u6bb5\u540d\u79f0\u7528\u4f5c\u952e\uff0c\u5b57\u6bb5\u503c\u4e3a\u5176\u5bf9\u5e94\u7684\u503c\u3002\u4ee5\u4e0b\u4ee3\u7801\u5c55\u793a\u5982\u4f55\u5c06",(0,l.kt)("a",{parentName:"p",href:"./example-dataset-1"},"\u793a\u4f8b\u6570\u636e\u96c6"),"\u7684\u524d 200 \u6761\u6570\u636e\u8bb0\u5f55\u6392\u5217\u4e3a\u884c\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n# \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\nwith open('/path/to/downloaded/medium_articles_2020_dpr.json') as f:\n        data = json.load(f)\n        rows = data['rows'][0:200]\n\nprint(rows[:2])\n# \u8f93\u51fa\uff1a\n# [\n#   {\n#      'id': 0,\n#      'title': 'The Reported Mortality Rate of Coronavirus Is Not Important',\n#      'title_vector': [0.041732933, 0.013779674, -0.027564144, ..., 0.030096486],\n#      'link': '<https://medium.com/swlh/the-reported-mortality-rate-of-coronavirus-is-not-important-369989c8d912>',\n#      'reading_time': 13,\n#      'publication': 'The Startup',\n#      'claps': 1100,\n#             'responses': 18\n#   },\n#   {\n#      'id': 1, \n#      'title': 'Dashboards in Python: 3 Advanced Examples for Dash Beginners and Everyone Else', \n#      'title_vector': [0.0039737443, 0.003020432, -0.0006188639, 0.03913546, ..., 0.021713957], \n#      'link': '<https://medium.com/swlh/dashboards-in-python-3-advanced-examples-for-dash-beginners-and-everyone-else-b1daf4e2ec0a>', \n#      'reading_time': 14, \n#      'publication': 'The Startup', \n#      'claps': 726, \n#      'responses': 3\n#   }\n# ]\n"))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n// \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\nconst data = JSON.parse(fs.readFileSync(\"path/to/downloaded/medium_articles_2020_dpr.json\", \"utf-8\"));\nconst rows = data.rows;\n\nconsole.log(rows[0])\n\n// \u8f93\u51fa\uff1a\n// {\n//   id: 0,\n//   title: 'The Reported Mortality Rate of Coronavirus Is Not Important',\n//   title_vector: [\n//       0.041732933,   0.013779674,   -0.027564144, -0.013061441,\n//       0.009748648, 0.00082446384, -0.00071647146,  0.048612226,\n//     ... 764 more items\n//   ],\n//   link: '<https://medium.com/swlh/the-reported-mortality-rate-of-coronavirus-is-not-important-369989c8d912>',\n//   reading_time: 13,\n//   publication: 'The Startup',\n//   claps: 1100,\n//   responses: 18\n// }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n// \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\n// \u8bfb\u53d6\u6570\u636e\u96c6\nString content;\n\nPath file = Path.of("/path/to/downloaded/medium_articles_2020_dpr.json");\ntry {\n    String content = Files.readString(file);\n} catch (Exception e) {\n    System.out.println("Failed to read file: " + e.getMessage());\n    return;\n}\n\nSystem.out.println("Successfully read file");\n\n// \u52a0\u8f7d\u6570\u636e\u96c6\nJSONObject dataset = JSON.parseObject(content);\nList<JSONObject> rows = getRows(dataset.getJSONArray("rows"), 200);\n\n// ===================================================================\n// \u8bf7\u5c06\u4ee5\u4e0b\u51fd\u6570\u4f5c\u4e3a\u4e3b\u51fd\u6570\u7684\u540c\u7ea7\u51fd\u6570\u5305\u542b\u5230\u7c7b\u4e2d\n// \u8be5\u51fd\u6570\u4ece\u793a\u4f8b\u6570\u636e\u96c6\u4e2d\u68c0\u7d22\u6307\u5b9a\u6570\u91cf\u7684\u8bb0\u5f55\uff0c\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230 JSON \u5bf9\u8c61\u5217\u8868\u4e2d\npublic static List<JSONObject> getRows(JSONArray dataset, int counts) {\n    List<JSONObject> rows = new ArrayList<JSONObject>();\n    for (int i = 0; i < counts; i++) {\n        JSONObject row = dataset.getJSONObject(i);\n        List<Float> vectors = row.getJSONArray("title_vector").toJavaList(Float.class);\n        Long reading_time = row.getLong("reading_time");\n        Long claps = row.getLong("claps");\n        Long responses = row.getLong("responses");\n        row.put("title_vector", vectors);\n        row.put("reading_time", reading_time);\n        row.put("claps", claps);\n        row.put("responses", responses);\n        row.remove("id");\n        rows.add(row);\n    }\n    return rows;\n}\n\nSystem.out.println(rows)\n\n// \u8f93\u51fa\uff1a\n// [{"reading_time":13,"publication":"The Startup","title_vector":[0.041732933,0.013779674,...,0.030096486],"link":"<https://medium.com/swlh/the-reported-mortality-rate-of-coronavirus-is-not-important-369989c8d912","responses":18,"title":"The> Reported Mortality Rate of Coronavirus Is Not Important","claps":1100}, \n//  {"reading_time":14,"publication":"The Startup","title_vector":[0.0039737443,0.003020432,-6.188639E-4,...,0.021713957],"link":"<https://medium.com/swlh/dashboards-in-python-3-advanced-examples-for-dash-beginners-and-everyone-else-b1daf4e2ec0a","responses":3,"title":"Dashboards> in Python: 3 Advanced Examples for Dash Beginners and Everyone Else","claps":726}]\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n// \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\n// Read the downloaded dataset file\nfile, err := os.ReadFile("path/to/downloaded/medium_articles_2020_dpr.json")\nif err != nil {\n        log.Fatal("Failed to read file:", err.Error())\n}\n\n// Load the dataset\nvar data Dataset\n\nif err := json.Unmarshal(file, &data); err != nil {\n        log.Fatal(err.Error())\n}\n\nlog.Println("Dataset loaded, row number: ", len(data.Rows))\n\nrows, err := getRows(data, 5979)\n\nlog.Println("Rows prepared: ", len(rows))\n\n// \u8f93\u51fa\uff1a\n// 2023/06/09 16:54:10 Dataset loaded, row number:  5979\n// 2023/06/09 16:54:11 Rows prepared:  5979\n\n// =====================================================\n// \u5728 type \u5b9a\u4e49\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n// Structs \n// \u6839\u636e\u6570\u636e\u96c6\u7684\u7ed3\u6784\u5b9a\u4e49 struct\ntype Dataset struct {\n        Rows []Row `json:"rows"`\n}\n\ntype Row struct {\n        ID          int64     `json:"id" milvus:"name:id"`\n        Title       string    `json:"title" milvus:"name:title"`\n        TitleVector []float32 `json:"title_vector" milvus:"name:title_vector"`\n        Link        string    `json:"link" milvus:"name:link"`\n        ReadingTime int64     `json:"reading_time" milvus:"name:reading_time"`\n        Publication string    `json:"publication" milvus:"name:publication"`\n        Claps       int64     `json:"claps" milvus:"name:claps"`\n        Response    int64     `json:"response" milvus:"name:responses"`\n}\n\nfunc getRows(dataset Dataset, counts int64) ([]interface{}, error) {\n        // \u5c06\u6570\u636e\u96c6\u8f6c\u6362\u4e3a\u884c\n        rows := make([]interface{}, 0, 2)\n\n        for _, row := range dataset.Rows[:counts] {\n                rows = append(rows, row)\n        }\n\n        return rows, nil\n}\n'))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6309\u5217\u6392\u5217\u6570\u636e\n\u8981\u5c06\u6570\u636e\u6392\u5217\u4e3a\u5217\uff0c\u8bf7\u4f7f\u7528\u5305\u542b\u8be5\u5217\u4e2d\u6240\u6709\u884c\u7684\u503c\u7684\u5d4c\u5957\u5217\u8868\u6765\u8868\u793a\u6bcf\u4e2a\u5217\u3002\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5\u5c06",(0,l.kt)("a",{parentName:"p",href:"./example-dataset-1"},"\u793a\u4f8b\u6570\u636e\u96c6"),"\u4e2d\u7684\u4e24\u4e2a\u6570\u636e\u8bb0\u5f55\u4ee5\u5217\u7684\u65b9\u5f0f\u6392\u5217\u3002"),(0,l.kt)("p",{parentName:"li"},"  Node.js SDK \u4e0d\u652f\u6301\u5c06\u6570\u636e\u6309\u5217\u6392\u5217\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n# \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\nwith open('/path/to/downloaded/medium_articles_2020_dpr.json') as f:\n    data = json.load(f)\n    rows = data['rows']\n    keys = list(rows[0].keys())\n    columns = [ [] for x in keys ]\n    for row in rows:\n        for x in keys:\n            columns[keys.index(x)].append(row[x])\n\n    print(\"A list of columns is as follows\")\n    columns_demo = [ [] for x in keys ]\n    for row in rows[:2]:\n        for x in keys:\n            columns_demo[keys.index(x)].append(row[x])\n\n    print(json.dumps(columns_demo, indent=2))\n\n        # \u8f93\u51fa\uff1a\n  #   [\n        #     [1, 2],\n        #     ['Dashboards in Python: 3 Advanced Examples for Dash Beginners and Everyone Else', 'How Can We Best Switch in Python?'],\n        #     [[0.0039737443, 0.003020432, -0.0006188639, ..., 0.021713957], [0.031961977, 0.00047043373, -0.018263113, ..., 0.034458436]],\n        #     ['<https://medium.com/swlh/dashboards-in-python-3-advanced-examples-for-dash-beginners-and-everyone-else-b1daf4e2ec0a>', '<https://medium.com/swlh/how-can-we-best-switch-in-python-458fb33f7835>'],\n        #     [14, 6]\n        #     ['The Startup', 'The Startup'],\n        #     [726, 500], \n        #     [3, 7]\n  #   ]\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n// \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\n// \u8bfb\u53d6\u6570\u636e\u96c6\nString content;\n\nPath file = Path.of("/path/to/downloaded/medium_articles_2020_dpr.json");\ntry {\n    String content = Files.readString(file);\n} catch (Exception e) {\n    System.out.println("Failed to read file: " + e.getMessage());\n    return;\n}\n\n// \u52a0\u8f7d\u6570\u636e\u96c6\nJSONObject dataset = JSON.parseObject(content);\nList<Field> fields = getFields(dataset.getJSONArray("rows"), 1);\n\n// ====================================================================\n// \u5c06\u4ee5\u4e0b\u5185\u5bb9\u4e0e\u4e3b\u51fd\u6570\u5e76\u6392\u5305\u542b\u8fdb\u6765\n\n// \u4ece\u793a\u4f8b\u6570\u636e\u96c6\u4e2d\u68c0\u7d22\u6307\u5b9a\u6570\u91cf\u7684\u8bb0\u5f55\uff0c\u5e76\u5c06\u5b83\u4eec\u6392\u5217\u5728\u5b57\u6bb5\u6570\u7ec4\u4e2d\npublic static List<Field> getFields(JSONArray dataset, int counts) {\n    List<Field> fields = new ArrayList<Field>();\n    List<String> titles = new ArrayList<String>();\n    List<List<Float>> title_vectors = new ArrayList<List<Float>>();\n    List<String> links = new ArrayList<String>();\n    List<Long> reading_times = new ArrayList<Long>();\n    List<String> publications = new ArrayList<String>();\n    List<Long> claps_list = new ArrayList<Long>();\n    List<Long> responses_list = new ArrayList<Long>();\n\n    for (int i = 0; i < counts; i++) {\n        JSONObject row = dataset.getJSONObject(i);\n        titles.add(row.getString("title"));\n        title_vectors.add(row.getJSONArray("title_vector").toJavaList(Float.class));\n        links.add(row.getString("link"));\n        reading_times.add(row.getLong("reading_time"));\n        publications.add(row.getString("publication"));\n        claps_list.add(row.getLong("claps"));\n        responses_list.add(row.getLong("responses"));\n    }\n\n    fields.add(new Field("title", titles));\n    fields.add(new Field("title_vector", title_vectors));\n    fields.add(new Field("link", links));\n    fields.add(new Field("reading_time", reading_times));\n    fields.add(new Field("publication", publications));\n    fields.add(new Field("claps", claps_list));\n    fields.add(new Field("responses", responses_list));\n\n    return fields;\n}\n\nSystem.out.println(field)\n\n// \u8f93\u51fa\uff1a\n// [Field{fieldName=\'title\', row_count=1}, Field{fieldName=\'title_vector\', row_count=1}, Field{fieldName=\'link\', row_count=1}, Field{fieldName=\'reading_time\', row_count=1}, Field{fieldName=\'publication\', row_count=1}, Field{fieldName=\'claps\', row_count=1}, Field{fieldName=\'responses\', row_count=1}]\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u4e0d\u63a8\u8350\u5b9e\u9645\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\n// \u4ee5\u4e0b\u4ee3\u7801\u4ec5\u4f5c\u6f14\u793a\u4f7f\u7528\n\n// \u4f7f\u7528\u4e0a\u6587\u7684 structs \u5b9a\u4e49\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n// \u8bfb\u53d6\u6570\u636e\u96c6\nfile, err := os.ReadFile("path/to/downloaded/medium_articles_2020_dpr.json")\nif err != nil {\n        log.Fatal("Failed to read file:", err.Error())\n}\n\nvar data Dataset\n\nif err := json.Unmarshal(file, &data); err != nil {\n        log.Fatal(err.Error())\n}\n\ncolumns, err := getColumns(data, 1)\n\nfor _, column := range columns {\n        log.Println(column.Name())\n}\n\n// \u8f93\u51fa\uff1a\n// 2023/06/17 16:32:50 Dataset loaded, row number:  5979\n// 2023/06/17 16:32:50 title\n// 2023/06/17 16:32:50 title_vector\n// 2023/06/17 16:32:50 link\n// 2023/06/17 16:32:50 reading_time\n// 2023/06/17 16:32:50 publication\n// 2023/06/17 16:32:50 claps\n// 2023/06/17 16:32:50 responses\n\n// ====================================================================\n// \u5c06\u4ee5\u4e0b\u5185\u5bb9\u4e0e\u4e3b\u51fd\u6570\u5e76\u6392\u5305\u542b\u8fdb\u6765\n\nfunc getColumns(dataset Dataset, counts int64) ([]entity.Column, error) {\n        // Make several arrays\n        ids := make([]int64, 0, 1)\n        titles := make([]string, 0, 1)\n        titleVectors := make([][]float32, 0, 1)\n        links := make([]string, 0, 1)\n        readingTimes := make([]int64, 0, 1)\n        publications := make([]string, 0, 1)\n        claps := make([]int64, 0, 1)\n        responses := make([]int64, 0, 1)\n\n        for _, row := range dataset.Rows[:counts] {\n                ids = append(ids, row.ID)\n                titles = append(titles, row.Title)\n                titleVectors = append(titleVectors, row.TitleVector)\n                links = append(links, row.Link)\n                readingTimes = append(readingTimes, row.ReadingTime)\n                publications = append(publications, row.Publication)\n                claps = append(claps, row.Claps)\n                responses = append(responses, row.Response)\n        }\n\n        // \u6309\u5217\u6392\u5217\n        idColumn := entity.NewColumnInt64("id", ids)\n        titleColumn := entity.NewColumnVarChar("title", titles)\n        titleVectorColumn := entity.NewColumnFloatVector("title_vector", 768, titleVectors)\n        linkColumn := entity.NewColumnVarChar("link", links)\n        readingTimeColumn := entity.NewColumnInt64("reading_time", readingTimes)\n        publicationColumn := entity.NewColumnVarChar("publication", publications)\n        clapColumn := entity.NewColumnInt64("claps", claps)\n        responseColumn := entity.NewColumnInt64("responses", responses)\n\n        return []entity.Column{\n                idColumn,\n                titleColumn,\n                titleVectorColumn,\n                linkColumn,\n                readingTimeColumn,\n                publicationColumn,\n                clapColumn,\n                responseColumn,\n        }, nil\n}\n')))))),(0,l.kt)("h3",{id:"insert-data"},"\u63d2\u5165\u6570\u636e"),(0,l.kt)("p",null,"\u51c6\u5907\u597d\u6570\u636e\u540e\uff0c\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u63d2\u5165\u6570\u636e\uff1a"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"# 7. \u63d2\u5165\u6570\u636e\n\n# \u884c\u63d2\u793a\u4f8b\nwith open('/path/to/downloaded/medium_articles_2020_dpr.json') as f:\n    data = json.load(f)\n    rows = data['rows']\n\nresults = collection.insert(rows)\n\n# \u5217\u63d2\u793a\u4f8b\n# with open('medium_articles_2020_dpr.json') as f:\n#     data = json.load(f)\n#     rows = data['rows']\n#     keys = list(rows[0].keys())\n#     columns = [ [] for x in keys ]\n#     for row in rows:\n#         for x in keys:\n#             columns[keys.index(x)].append(row[x])\n\n#     columns = [ [] for x in keys ]\n#     for row in rows:\n#         for x in keys:\n#             columns[keys.index(x)].append(row[x])\n\n# results = collection.insert(columns) # also works\n\ncollection.flush()\n\nprint(f\"Data inserted successfully! Inserted rows: {results.insert_count}\")\n\n# \u8f93\u51fa\uff1a\n# Data inserted successfully! Inserted rows: 5979\n"))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// 7. \u63d2\u5165\u6570\u636e\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nconst data = JSON.parse(fs.readFileSync(\"path/to/downloaded/medium_articles_2020_dpr.json\", \"utf-8\"));\nconst rows = data.rows;\n\nres = await client.insert({\n    collection_name,\n    data: rows\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// {\n//   succ_index: [\n//      0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,\n//     12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23,\n//     24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n//     36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\n//     48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59,\n//     60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,\n//     72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83,\n//     84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95,\n//     96, 97, 98, 99,\n//     ... 5879 more items\n//   ],\n//   err_index: [],\n//   status: { error_code: 'Success', reason: '' },\n//   IDs: { int_id: { data: [Array] }, id_field: 'int_id' },\n//   acknowledged: false,\n//   insert_cnt: '5979',\n//   delete_cnt: '0',\n//   upsert_cnt: '0',\n//   timestamp: '442251330624684034'\n// }\n\nres = await client.flush({\n    collection_names: [collection_name]\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// {\n//    coll_segIDs: { medium_articles: { data: [Array] } },\n//    flush_coll_segIDs: { medium_articles: { data: [] } },\n//    coll_seal_times: { medium_articles: '1687054942' },\n//    status: { error_code: 'Success', reason: '' },\n//    db_name: 'default'\n// }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 7. \u63d2\u5165\u6570\u636e\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n// \u8bfb\u53d6\u6570\u636e\u96c6\nString content;\n\nPath file = Path.of("medium_articles_2020_dpr.json");\ntry {\n    content = Files.readString(file);\n} catch (Exception e) {\n    System.out.println("Failed to read file: " + e.getMessage());\n    return;\n}\n\nSystem.out.println("Successfully read file");\n\n// \u52a0\u8f7d\u6570\u636e\u96c6\nJSONObject dataset = JSON.parseObject(content);\n// List<JSONObject> rows = getRows(dataset.getJSONArray("rows"), 5979);\nList<Field> fields = getFields(dataset.getJSONArray("rows"), 5979); // also works\n\n// \u6309\u5217\u63d2\u5165\u6570\u636e\nInsertParam insertParam = InsertParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .withFields(fields)\n    // .withRows(rows)\n    .build();\n\nR<MutationResult> insertResponse = client.insert(insertParam);\n\nif (insertResponse.getStatus() != R.Status.Success.getCode()) {\n    System.out.println(insertResponse.getMessage());\n}\n\nMutationResultWrapper mutationResultWrapper = new MutationResultWrapper(insertResponse.getData());\n\nSystem.out.println("Successfully insert entities: " + mutationResultWrapper.getInsertCount());\n\n// \u8f93\u51fa\uff1a\n// 2023-06-17 17:06:59 io.milvus.client.AbstractMilvusGrpcClient logInfo \n// INFO: InsertParam{collectionName=\'medium_articles\', partitionName=\'\', rowCount=5979}\n// 2023-06-17 17:06:59 io.milvus.client.AbstractMilvusGrpcClient logInfo \n// INFO: DescribeCollectionParam(databaseName=null, collectionName=medium_articles)\n// Successfully insert entities: 5979\n\nList<String> collectionNames = new ArrayList();\ncollectionNames.add("medium_articles");\n\nFlushParam flushParam = FlushParam.newBuilder()\n    .withCollectionNames(collectionNames)\n    .withSyncFlush(true)\n    .build();\n\nR<FlushResponse> flush = client.flush(flushParam);\n\nif (flush.getException() != null) {\n    System.out.println("Failed to flush: " + flush.getException().getMessage());\n    return;\n}\n\nSystem.out.println("Flushed!");\n\n// \u8f93\u51fa\uff1a\n// 2023-06-17 17:07:04 io.milvus.client.AbstractMilvusGrpcClient logInfo \n// INFO: DropCollectionParam{collectionName=\'medium_articles\'}\n// 2023-06-17 17:07:05 io.milvus.client.AbstractMilvusGrpcClient logInfo \n// INFO: FlushParam{collectionNames=\'[medium_articles]\', syncFlush=true, syncFlushWaitingInterval=500, syncFlushWaitingTimeout=60}\n// Flushed!\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 7. \u63d2\u5165\u6570\u636e\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n// \u8bfb\u53d6\u6570\u636e\u96c6\nfile, err := os.ReadFile("path/to/downloaded/medium_articles_2020_dpr.json")\nif err != nil {\n        log.Fatal("Failed to read file:", err.Error())\n}\n\n// \u52a0\u8f7d\u6570\u636e\u96c6\nvar data Dataset\n\nif err := json.Unmarshal(file, &data); err != nil {\n        log.Fatal(err.Error())\n}\n\nlog.Println("Dataset loaded, row number: ", len(data.Rows))\n\n// \u6309\u884c\u63d2\u5165\u6570\u636e\nrows, err := getRows(data, 5979)\n\nlog.Println("Rows prepared: ", len(rows))\n\nresults, err := conn.InsertRows(context.Background(), "medium_articles", "", rows)\n\nif err != nil {\n        log.Fatal("Failed to insert rows:", err.Error())\n}\n\n// Or insert columns\n// columns, err := getColumns(data, 5979)\n// \n// for _, column := range columns {\n//         log.Println(column.Name())\n// }\n// \n// results, err := conn.Insert(context.Background(), "medium_articles", "", columns...)\n// \n// if err != nil {\n//         log.Fatal("Failed to insert rows:", err.Error())\n// \n// }\n\nlog.Println("Entities inserted:", results.Len())\n\n// \u8f93\u51fa\uff1a\n// 2023/06/17 16:47:35 Entities inserted: 5979\n\nfluerr := conn.Flush(context.Background(), "medium_articles", false)\n\nif fluerr != nil {\n        log.Fatal("Failed to flush collection:", fluerr.Error())\n}\n\nlog.Println("Collection flushed")\n\n// \u8f93\u51fa\uff1a\n// 2023/06/17 17:09:32 Collection flushed\n')))),(0,l.kt)("h2",{id:"search-and-query"},"\u641c\u7d22\u548c\u67e5\u8be2"),(0,l.kt)("p",null,"\u5355\u5411\u91cf\u641c\u7d22\u662f\u6307\u4ec5\u6307\u5b9a\u4e00\u4e2a\u67e5\u8be2\u5411\u91cf\uff0c\u641c\u7d22\u5e76\u8fd4\u56de\u4e0e\u67e5\u8be2\u5411\u91cf\u6700\u76f8\u4f3c\u7684\u524d ",(0,l.kt)("em",{parentName:"p"},"K")," \u4e2a Entity\u3002"),(0,l.kt)("p",null,"Zilliz Cloud \u4e5f\u652f\u6301\u5728\u5355\u4e2a\u8bf7\u6c42\u4e2d\u6307\u5b9a\u591a\u4e2a\u67e5\u8be2\u5411\u91cf\u6765\u8fdb\u884c\u6279\u91cf\u641c\u7d22\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6279\u91cf\u641c\u7d22\u6bd4\u5355\u5411\u91cf\u641c\u7d22\u66f4\u9ad8\u6548\uff0c\u56e0\u4e3a\u6279\u91cf\u641c\u7d22\u7684\u603b\u5ef6\u65f6\u4f1a\u6bd4\u9010\u4e00\u6267\u884c\u5355\u5411\u91cf\u641c\u7d22\u7684\u7d2f\u8ba1\u5ef6\u65f6\u8981\u4f4e\u3002"),(0,l.kt)("p",null,"\u641c\u7d22\u524d\u9700\u5b9a\u4e49\u641c\u7d22\u76f8\u5173\u53c2\u6570\uff0c\u5e76\u786e\u4fdd\u641c\u7d22\u53c2\u6570\u4e2d\u5b9a\u4e49\u7684\u76f8\u4f3c\u5ea6\u7c7b\u578b\u4e0e\u7d22\u5f15\u53c2\u6570\u4e2d\u5b9a\u4e49\u7684\u4e00\u81f4\u3002\u60a8\u53ef\u4ee5\u5728\u641c\u7d22\u8bf7\u6c42\u4e2d\u5f15\u7528\u641c\u7d22\u53c2\u6570\uff0c\u5e76\u6307\u5b9a\u67e5\u8be2\u5411\u91cf\u3001\u5411\u91cf\u5b57\u6bb5\u540d\u79f0\u3001\u8fd4\u56de\u7ed3\u679c\u9650\u5236\u4ee5\u53ca\u5176\u4ed6\u76f8\u5173\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u4ee3\u7801\u641c\u7d22\u4e0e\u6307\u5b9a\u67e5\u8be2\u5411\u91cf\u6700\u76f8\u8fd1\u7684 5 \u6761 Entity\uff0c\u5e76\u8fd4\u56de\u5404 Entity \u7684\u4e3b\u952e\u3001\u8ddd\u79bb\u7b49\u4fe1\u606f\u3002"),(0,l.kt)(r.Z,{defaultValue:"python",values:[{label:"Python",value:"python"},{label:"NodeJS",value:"javascript"},{label:"Java",value:"java"},{label:"Go",value:"go"}],mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"python",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'# 8. \u641c\u7d22\u6570\u636e\n\nresult = collection.search(\n    data=[rows[0][\'title_vector\']],\n    anns_field="title_vector",\n    param={"metric_type": "L2", "params": {"nprobe": 10}},\n    limit=3,\n    expr=\'claps > 30 and reading_time < 10\',\n    output_fields=["title", "link" ],\n)\n\n# \u83b7\u53d6\u8fd4\u56de\u6240\u6709 ID\n# result[0]\u8868\u793a \'data\' \u5217\u4e2d\u7b2c\u4e00\u4e2a\u67e5\u8be2\u5411\u91cf\u7684\u7ed3\u679c\nids = result[0].ids\n\nprint(ids)\n\n# \u8f93\u51fa\uff1a\n#\n# [5607, 5641, 3441]\n\n# \u83b7\u53d6\u6240\u6709\u8fd4\u56de\u5411\u91cf\u5230\u67e5\u8be2\u5411\u91cf\u7684\u8ddd\u79bb\ndistances = result[0].distances\n\nprint(distances)\n\n# \u8f93\u51fa\uff1a\n#\n# [0.36103835701942444, 0.37674015760421753, 0.4162980318069458]\n\n# \u83b7\u53d6\u641c\u7d22\u8bf7\u6c42\u4e2d\u6307\u5b9a\u7684\u8f93\u51fa\u5b57\u6bb5\u7684\u503c\nhits = result[0]\nfor hit in hits:\n    print(hit.entity.get("title"))\n    print(hit.entity.get("link"))\n\n# \u8f93\u51fa\uff1a\n#\n# The Hidden Side Effect of the Coronavirus\n# https://medium.com/swlh/the-hidden-side-effect-of-the-coronavirus-b6a7a5ee9586\n# Why The Coronavirus Mortality Rate is Misleading\n# https://towardsdatascience.com/why-the-coronavirus-mortality-rate-is-misleading-cc63f571b6a6\n# Coronavirus shows what ethical Amazon could look like\n# https://medium.com/swlh/coronavirus-shows-what-ethical-amazon-could-look-like-7c80baf2c663\n'))),(0,l.kt)(i.Z,{value:"javascript",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// 8. \u641c\u7d22\u6570\u636e\n\n// \u5728\u5f02\u6b65\u51fd\u6570\u58f0\u660e\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nres = await client.search({\n    collection_name,\n    vector: rows[0].title_vector,\n    limit: 3,\n    filter: \"claps > 30 and reading_time < 10\",\n    output_fields: [\"title\", \"link\"]\n});\n\nconsole.log(res);\n\n// \u8f93\u51fa\uff1a\n// {\n//   status: { error_code: 'Success', reason: '' },\n//   results: [\n//     {\n//       score: -0.8194807767868042,\n//       id: '5607',\n//       title: 'The Hidden Side Effect of the Coronavirus',\n//       link: '<https://medium.com/swlh/the-hidden-side-effect-of-the-coronavirus-b6a7a5ee9586>'\n//     },\n//     {\n//       score: -0.8116300106048584,\n//       id: '5641',\n//       title: 'Why The Coronavirus Mortality Rate is Misleading',\n//       link: '<https://towardsdatascience.com/why-the-coronavirus-mortality-rate-is-misleading-cc63f571b6a6>'\n//     },\n//     {\n//       score: -0.7918509244918823,\n//       id: '3441',\n//       title: 'Coronavirus shows what ethical Amazon could look like',\n//       link: '<https://medium.com/swlh/coronavirus-shows-what-ethical-amazon-could-look-like-7c80baf2c663>'\n//     }\n//   ]\n// }\n"))),(0,l.kt)(i.Z,{value:"java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// 8. \u641c\u7d22\u6570\u636e\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nList<List<Float>> queryVectors = new ArrayList<>();\nList<Float> queryVector = rows.get(0).getJSONArray("title_vector").toJavaList(Float.class);\nqueryVectors.add(queryVector);\n\n// \u5b9a\u4e49 outputFields\nList<String> outputFields = new ArrayList<>();\noutputFields.add("title");\noutputFields.add("link");\n\n// \u5728 Collection \u4e2d\u641c\u7d22\u5411\u91cf\nSearchParam searchParam = SearchParam.newBuilder()\n    .withCollectionName("medium_articles")\n    .withVectorFieldName("title_vector")\n    .withVectors(queryVectors)\n    .withExpr("claps > 30 and reading_time < 10")\n    .withTopK(3)   \n    .withMetricType(MetricType.L2)  \n    .withParams("{\\\\"nprobe\\\\":10,\\\\"offset\\\\":2, \\\\"limit\\\\":3}")\n    .withConsistencyLevel(ConsistencyLevelEnum.BOUNDED)\n    .withOutFields(outputFields)\n    .build();\n\nR<SearchResults> response = client.search(searchParam);\n\nSearchResultsWrapper wrapper = new SearchResultsWrapper(response.getData().getResults());\nSystem.out.println("Search results");\n\nfor (int i = 0; i < queryVectors.size(); ++i) {\n    List<SearchResultsWrapper.IDScore> scores = wrapper.getIDScore(i);\n        List<String> titles = (List<String>) wrapper.getFieldData("title", i);\n    for (int j = 0; j < scores.size(); ++j) {\n        SearchResultsWrapper.IDScore score = scores.get(j);\n        System.out.println("Top " + j + " ID:" + score.getLongID() + " Distance:" + score.getScore());\n                System.out.println("Title: " + titles.get(j));    \n        }\n}\n\n// \u8f93\u51fa\uff1a\n// Search results\n// Top 0 ID:442206870369024034 Distance:0.41629803\n// Title: Coronavirus shows what ethical Amazon could look like\n// Top 1 ID:442206870369021531 Distance:0.4360938\n// Title: Mortality Rate As an Indicator of an Epidemic Outbreak\n// Top 2 ID:442206870369024868 Distance:0.48886314\n// Title: How Can AI Help Fight Coronavirus?\n'))),(0,l.kt)(i.Z,{value:"go",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// 8. \u641c\u7d22\u6570\u636e\n\n// \u5728\u4e3b\u51fd\u6570\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\nvectors := []entity.Vector{}\n\nfor _, row := range data.Rows[:1] {\n        vector := make(entity.FloatVector, 0, 768)\n        vector = append(vector, row.TitleVector...)\n        vectors = append(vectors, vector)\n}\n\n// \u5b9a\u4e49\u641c\u7d22\u53c2\u6570\nsp := searchParams{10}\n\n// \u641c\u7d22\u6570\u636e\nsearchResults, err := conn.Search(\n        context.Background(),\n        "medium_articles",                // collection name\n        []string{},                       // partition name\n        "",                               // boolean expression\n        []string{"title", "publication"}, // output fields\n        vectors,                          // query vectors\n        "title_vector",                   // vector field name\n        entity.MetricType("L2"),          // metric type\n        3,                                // topK\n        sp,                               // search parameters\n)\n\nif err != nil {\n        log.Fatal("Failed to search:", err.Error())\n}\n\n// \u89e3\u6790\u641c\u7d22\u7ed3\u679c\nfor i, sr := range searchResults {\n        log.Println("Result counts", i, ":", sr.ResultCount)\n\n        ids := sr.IDs.FieldData().GetScalars().GetLongData().GetData()\n        scores := sr.Scores\n        titles := sr.Fields.GetColumn("title").FieldData().GetScalars().GetStringData().GetData()\n        publications := sr.Fields.GetColumn("publication").FieldData().GetScalars().GetStringData().GetData()\n\n        for i, record := range ids {\n                log.Println("ID:", record, "Score:", scores[i], "Title:", titles[i], "Publication:", publications[i])\n        }\n\n}\n\n// \u8f93\u51fa\uff1a\n// 2023/06/17 17:28:28 Result counts 0 : 3\n// 2023/06/17 17:28:28 ID: 0 Score: 0 Title: The Reported Mortality Rate of Coronavirus Is Not Important Publication: The Startup\n// 2023/06/17 17:28:28 ID: 3177 Score: 0.29999837 Title: Following the Spread of Coronavirus Publication: Towards Data Science\n// 2023/06/17 17:28:28 ID: 5607 Score: 0.36103836 Title: The Hidden Side Effect of the Coronavirus Publication: The Startup\n\n// =======================================================\n// \u5728 type \u5b9a\u4e49\u4e2d\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n// \u4e3a\u641c\u7d22\u53c2\u6570\u5b9a\u4e49 struct \u548c func\ntype searchParams struct {\n        nprobe int64\n}\n\nfunc (sp searchParams) Params() map[string]interface{} {\n        return map[string]interface{}{\n                "nprobe": sp.nprobe,\n        }\n}\n')))),(0,l.kt)("h2",{id:"related-documents"},"\u76f8\u5173\u6587\u6863"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"./enable-dynamic-schema"},"\u5f00\u542f\u52a8\u6001 Schema"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"./use-partition-key"},"\u4f7f\u7528 Partition Key")," ")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"./javascript-object-notation-json-1"},"JSON")))))}g.isMDXComponent=!0}}]);