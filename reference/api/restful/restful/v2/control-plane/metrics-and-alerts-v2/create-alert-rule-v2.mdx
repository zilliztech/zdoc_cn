---
displayed_sidebar: restfulSidebar
sidebar_positition: 1
slug: /restful/create-alert-rule-v2
beta: FALSE
title: "创建告警规则 | RESTful"
description: "本接口在指定项目中创建新的告警规则。当前用户须为项目管理员。 | RESTful"
hide_table_of_contents: true
sidebar_label: "创建告警规则"
sidebar_custom_props: { badges: ['post']}
---

# 创建告警规则

import RestSpecs from '@site/src/components/RestSpecs';

<RestSpecs specs={specs} endpoint={endpoint} method={method} target="zilliz" lang="zh-CN" />

export const specs = {"summary":"Create Alert Rule","deprecated":false,"description":"Creates a new alert rule in the specified project. The current user should be a project admin.","x-i18n":{"zh-CN":{"summary":"创建告警规则","description":"本接口在指定项目中创建新的告警规则。当前用户须为项目管理员。"}},"tags":["Metrics & Alerts (V2)"],"parameters":[{"name":"Authorization","in":"header","description":"The authentication token should be an API key with appropriate privileges.","required":true,"example":"Bearer {{TOKEN}}","schema":{"type":"string"},"x-i18n":{"zh-CN":{"description":"认证令牌，应为具备适当权限的 API 密钥。"}},"x-i18n-langs":["zh-CN"]},{"name":"Accept","in":"header","description":"Use `application/json`.","x-i18n":{"zh-CN":{"description":"使用 `application/json`。"}},"required":false,"example":"application/json","schema":{"type":"string"}}],"requestBody":{"description":"The details of the alert rule to create.","content":{"application/json":{"schema":{"type":"object","properties":{"projectId":{"type":"string","description":"The ID of the project to which the alert rule belongs.","x-i18n":{"zh-CN":{"description":"告警规则所属项目 ID。"}}},"ruleName":{"type":"string","description":"The name of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则名称。"}}},"level":{"type":"string","description":"The level of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则级别。"}},"enum":["CRITICAL","WARNING"]},"metricName":{"type":"string","description":"The name of the metric that the alert rule monitors.","x-i18n":{"zh-CN":{"description":"告警规则监控的指标名称。"}}},"threshold":{"type":"string","description":"The threshold value of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则阈值。"}}},"windowSize":{"type":"string","description":"The time window for the alert rule in minutes.","x-i18n":{"zh-CN":{"description":"告警规则的时间窗口，单位为分钟。"}}},"comparisonOperator":{"type":"string","description":"The comparison operator used in the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则使用的比较运算符。"}},"enum":["GREATER_THAN","EQUALS","LESS_THAN","GREATER_THAN_OR_EQUALS","LESS_THAN_OR_EQUALS"]},"targetClusterIds":{"type":"array","description":"The IDs of the clusters to which the alert rule applies.","x-i18n":{"zh-CN":{"description":"告警规则适用的集群 ID 列表。"}},"items":{"type":"string","description":"The ID of the cluster.","x-i18n":{"zh-CN":{"description":"集群 ID。"}}}},"enabled":{"type":"boolean","description":"Indicates whether the alert rule is enabled.","x-i18n":{"zh-CN":{"description":"告警规则是否启用。"}}},"sendResolved":{"type":"boolean","description":"Indicates whether to send notifications when the alert rule is resolved.","x-i18n":{"zh-CN":{"description":"告警规则是否发送已解决的通知。"}}},"actions":{"type":"array","description":"The actions to take when the alert rule is triggered.","x-18n":{"zh-CN":{"description":"触发告警规则时采取的操作列表。"}},"items":{"type":"object","description":"An action to take when the alert rule is triggered.","x-18n":{"zh-CN":{"description":"触发告警规则时采取的操作。"}},"properties":{"type":{"type":"string","description":"The type of the action.","x-i18n":{"zh-CN":{"description":"操作类型。"}},"enum":["EMAIL","SMS","WEBHOOK","SLACK","LARK","WECOM","PAGERDUTY","OPSGENIE"]},"config":{"type":"object","description":"The configuration for the action.","x-i18n":{"zh-CN":{"description":"操作配置。"}},"properties":{"recipients":{"type":"object","description":"The recipients of the alert notification. This applies only when the action type is EMAIL and SMS.","x-i18n":{"zh-CN":{"description":"告警通知的接收者。仅当操作类型为 EMAIL 和 SMS 时适用。"}},"properties":{"members":{"type":"array","description":"A list of email addresses to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的邮件地址列表。"}},"items":{"type":"string","description":"An email address to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的邮件地址。"}}}},"orgRoles":{"type":"array","description":"A list of organization roles to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的组织角色列表。"}},"items":{"type":"string","description":"An organization role to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的组织角色。"}},"enum":["OWNER","MEMBER","BILLING_ADMIN"]}},"projectRoles":{"type":"array","description":"A list of project roles to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的项目角色列表。"}},"items":{"type":"string","description":"A project role to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的项目角色。"}},"enum":["OWNER","MEMBER"]}}}},"url":{"type":"string","description":"The URL to which the alert notification should be sent. This applies only when the action type is WEBHOOK.","x-i18n":{"zh-CN":{"description":"告警通知应发送到的 URL。仅当操作类型为 WEBHOOK 时适用。"}}},"webhookUrl":{"type":"string","description":"The URL to which the alert notification should be sent. This applies only when the action type is SLACK, LARK, and WECOM.","x-i18n":{"zh-CN":{"description":"告警通知应发送到的 URL。仅当操作类型为 SLACK、LARK、WECOM 时适用。"}}},"region":{"type":"string","description":"The region where your PagerDuty or OpsGenie service is located. This applies only when the action type is PAGERDUTY and OPSGENIE.","x-i18n":{"zh-CN":{"description":"您的 PagerDuty 或 OpsGenie 服务所在的区域。仅当操作类型为 PAGERDUTY 和 OPSGENIE 时适用。"}}},"apiKey":{"type":"string","description":"The API key for your PagerDuty or OpsGenie service. This applies only when the action type is PAGERDUTY and OPSGENIE.","x-i18n":{"zh-CN":{"description":"您的 PagerDuty 或 OpsGenie 服务的 API 密钥。仅当操作类型为 PAGERDUTY 和 OPSGENIE 时适用。"}}}}}},"required":["type","config"]}}},"required":["projectId","ruleName","level","metricName","enabled","sendResolved","actions"],"example":{"projectId":"proj-b44a39b0c51cf21791a841","ruleName":"my alert name","level":"CRITICAL","metricName":"REQUEST_LATENCY_SEARCH_P99","threshold":"70","windowSize":"10","comparisonMethod":"GREATER_THAN","targetClusterIds":["in01-xxxxxxxxxxxx"],"enabled":true,"sendResolved":true,"actions":[{"type":"EMAIL","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"SMS","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"WEBHOOK","config":{"url":"https://xxxx"}},{"type":"SLACK","config":{"webhookUrl":"https://xxxx"}},{"type":"LARK","config":{"webhookUrl":"https://xxxx"}},{"type":"WECOM","config":{"webhookUrl":"https://xxxx"}},{"type":"PAGERDUTY","config":{"region":"US","apiKey":"..."}},{"type":"OPSGENIE","config":{"region":"US","apiKey":"..."}}]}},"example":{"id":"12391290837zs09sad0d09123","projectId":"proj-b44a39b0c51cf21791a841","ruleName":"my alert name","level":"CRITICAL","metricName":"REQUEST_LATENCY_SEARCH_P99","threshold":"70","windowSize":"10","comparisonOperator":"GREATER_THAN","targetClusterIds":["in01-xxxxxxxxxxxx"],"enabled":true,"sendResolved":true,"actions":[{"type":"EMAIL","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"SMS","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"WEBHOOK","config":{"url":"https://xxxx"}},{"type":"SLACK","config":{"webhookUrl":"https://xxxx"}},{"type":"LARK","config":{"webhookUrl":"https://xxxx"}},{"type":"WECOM","config":{"webhookUrl":"https://xxxx"}},{"type":"PAGERDUTY","config":{"region":"US","apiKey":"..."}},{"type":"OPSGENIE","config":{"region":"US","apiKey":"..."}}]}}}},"responses":{"200":{"description":"Returns a list of alert rules in the specified project.","x-i18n":{"zh-CN":{"description":"返回指定项目的所有告警规则列表。"}},"content":{"application/json":{"schema":{"oneOf":[{"x-tab-label":"success","description":"Returns a list of alert rules.","x-i18n":{"zh-CN":{"description":"返回告警规则列表。"}},"x-i18n-langs":["zh-CN"],"type":"object","properties":{"code":{"type":"integer","description":"Response code.","x-i18n":{"zh-CN":{"description":"响应码。"}}},"data":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则 ID。"}}},"projectId":{"type":"string","description":"The ID of the project to which the alert rule belongs.","x-i18n":{"zh-CN":{"description":"告警规则所属项目 ID。"}}},"ruleName":{"type":"string","description":"The name of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则名称。"}}},"level":{"type":"string","description":"The level of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则级别。"}},"enum":["CRITICAL","WARNING"]},"metricName":{"type":"string","description":"The name of the metric that the alert rule monitors.","x-i18n":{"zh-CN":{"description":"告警规则监控的指标名称。"}}},"threshold":{"type":"string","description":"The threshold value of the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则阈值。"}}},"windowSize":{"type":"string","description":"The time window for the alert rule in minutes.","x-i18n":{"zh-CN":{"description":"告警规则的时间窗口，单位为分钟。"}}},"comparisonOperator":{"type":"string","description":"The comparison operator used in the alert rule.","x-i18n":{"zh-CN":{"description":"告警规则使用的比较运算符。"}},"enum":["GREATER_THAN","EQUALS","LESS_THAN","GREATER_THAN_OR_EQUALS","LESS_THAN_OR_EQUALS"]},"targetClusterIds":{"type":"array","description":"The IDs of the clusters to which the alert rule applies.","x-i18n":{"zh-CN":{"description":"告警规则适用的集群 ID 列表。"}},"items":{"type":"string","description":"The ID of the cluster.","x-i18n":{"zh-CN":{"description":"集群 ID。"}}}},"enabled":{"type":"boolean","description":"Indicates whether the alert rule is enabled.","x-i18n":{"zh-CN":{"description":"告警规则是否启用。"}}},"sendResolved":{"type":"boolean","description":"Indicates whether to send notifications when the alert rule is resolved.","x-i18n":{"zh-CN":{"description":"告警规则是否发送已解决的通知。"}}},"actions":{"type":"array","description":"The actions to take when the alert rule is triggered.","x-18n":{"zh-CN":{"description":"触发告警规则时采取的操作列表。"}},"items":{"type":"object","description":"An action to take when the alert rule is triggered.","x-18n":{"zh-CN":{"description":"触发告警规则时采取的操作。"}},"properties":{"type":{"type":"string","description":"The type of the action.","x-i18n":{"zh-CN":{"description":"操作类型。"}},"enum":["EMAIL","SMS","WEBHOOK","SLACK","LARK","WECOM","PAGERDUTY","OPSGENIE"]},"config":{"type":"object","description":"The configuration for the action.","x-i18n":{"zh-CN":{"description":"操作配置。"}},"properties":{"recipients":{"type":"object","description":"The recipients of the alert notification. This applies only when the action type is EMAIL and SMS.","x-i18n":{"zh-CN":{"description":"告警通知的接收者。仅当操作类型为 EMAIL 和 SMS 时适用。"}},"properties":{"members":{"type":"array","description":"A list of email addresses to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的邮件地址列表。"}},"items":{"type":"string","description":"An email address to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的邮件地址。"}}}},"orgRoles":{"type":"array","description":"A list of organization roles to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的组织角色列表。"}},"items":{"type":"string","description":"An organization role to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的组织角色。"}},"enum":["OWNER","MEMBER","BILLING_ADMIN"]}},"projectRoles":{"type":"array","description":"A list of project roles to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的项目角色列表。"}},"items":{"type":"string","description":"A project role to receive the alert notification.","x-i18n":{"zh-CN":{"description":"用于接收通知的项目角色。"}},"enum":["OWNER","MEMBER"]}}}},"url":{"type":"string","description":"The URL to which the alert notification should be sent. This applies only when the action type is WEBHOOK.","x-i18n":{"zh-CN":{"description":"告警通知应发送到的 URL。仅当操作类型为 WEBHOOK 时适用。"}}},"webhookUrl":{"type":"string","description":"The URL to which the alert notification should be sent. This applies only when the action type is SLACK, LARK, and WECOM.","x-i18n":{"zh-CN":{"description":"告警通知应发送到的 URL。仅当操作类型为 SLACK、LARK、WECOM 时适用。"}}},"region":{"type":"string","description":"The region where your PagerDuty or OpsGenie service is located. This applies only when the action type is PAGERDUTY and OPSGENIE.","x-i18n":{"zh-CN":{"description":"您的 PagerDuty 或 OpsGenie 服务所在的区域。仅当操作类型为 PAGERDUTY 和 OPSGENIE 时适用。"}}},"apiKey":{"type":"string","description":"The API key for your PagerDuty or OpsGenie service. This applies only when the action type is PAGERDUTY and OPSGENIE.","x-i18n":{"zh-CN":{"description":"您的 PagerDuty 或 OpsGenie 服务的 API 密钥。仅当操作类型为 PAGERDUTY 和 OPSGENIE 时适用。"}}}}}}}}}}}},{"x-tab-label":"error","description":"Returns an error message.","x-i18n":{"zh-CN":{"description":"返回错误消息。"}},"x-i18n-langs":["zh-CN"],"type":"object","properties":{"code":{"type":"integer","description":"Response code.","x-i18n":{"zh-CN":{"description":"响应码。"}}},"message":{"type":"string","description":"Error message.","x-i18n":{"zh-CN":{"description":"错误描述。"}}}}}]},"examples":{"1":{"summary":"success","x-target-response":"OPTION 1","value":{"code":0,"data":{"id":"12391290837zs09sad0d09123","projectId":"proj-b44a39b0c51cf21791a841","ruleName":"my alert name","level":"CRITICAL","metricName":"REQUEST_LATENCY_SEARCH_P99","threshold":"70","windowSize":"10","comparisonOperator":"GREATER_THAN","targetClusterIds":["in01-xxxxxxxxxxxx"],"enabled":true,"sendResolved":true,"actions":[{"type":"EMAIL","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"SMS","config":{"recipients":{"members":["your-email@your-org.com"],"orgRoles":["OWNER","MEMBER","BILLING_ADMIN"],"projectRoles":["OWNER","MEMBER"]}}},{"type":"WEBHOOK","config":{"url":"https://xxxx"}},{"type":"SLACK","config":{"webhookUrl":"https://xxxx"}},{"type":"LARK","config":{"webhookUrl":"https://xxxx"}},{"type":"WECOM","config":{"webhookUrl":"https://xxxx"}},{"type":"PAGERDUTY","config":{"region":"US","apiKey":"..."}},{"type":"OPSGENIE","config":{"region":"US","apiKey":"..."}}]}}},"2":{"summary":"failure","x-target-response":"OPTION 2","value":{"code":21119,"message":"The apikey is illegal."}}}}}}}}
export const endpoint = "/v2/alertRules"
export const method = "post"
